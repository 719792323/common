# 性能测试分类

### 性能测试

性能测试方法是通过测试工具模拟用户请求系统，目的主要是为了**测试系统的性能是否满足要求**。通俗地说，这种方法就是要在特定的运行条件下验证系统的能力状态。性能测试是你在对系统性能已经有了解的前提之后进行的，并且**有明确的性能指标**。

### 负载测试

**对被测试的系统继续加大请求压力，直到服务器的某个资源已经达到饱和了**，比如系统的缓存已经不够用了或者系统的响应时间已经不满足要求了。负载测试说白点就是**测试系统的上限**。

### 压力测试

**不去管系统资源的使用情况，对系统继续加大请求压力**，**直到服务器崩溃无法再继续提供服务的测试**。

### 稳定性测试

**模拟真实场景**，给系统一定压力，看看业务是否能**稳定运行**

# 测试目标

### 1.业务目标

* 恒定吞吐量的延迟：在每秒 xxx的请求量下，响应时间 99 分位值在 10ms 以下
* 恒定吞吐量的错误率：在每秒 xxx的请求量下，错误率低于1%

### 2.监控目标

* 系统层面
  * cpu
  * 磁盘
  * 网络
  * 内存
  * os资源
* 中间层面
  * mysql
  * redis
  * rocketmq
  * nginx
* 应用层面
  * JVM
  * Tomcat
  * springboot

# 测试工具、监控工具、分析工具

### 1.测试工具

JMeter

### 2.监控工具

- 采集架构：prometheus、logstash
- 采集器：spring actuator、node_exporter、mysqld_exporter、redis_exporter、rocket_mq_exporter、（nginx）

### 3.分析工具

arthas、grafana、elk

# 测试环境

### 1.生产环境、测试环境

测试环境

### 2.软硬件环境

按比例缩小

### 3.数据量

测试环境提供等比数据

# 测试方案

### 1.负载曲线与规模方案

* 曲线方案

  - 低负载曲线：摸底

  - 阶梯负载曲线：突变范围

  - 高负载曲线：摸高

* 规模方案


### 2.测试数据

随机生成数据或导入提供的待测数据

### 3.链路测试方案

* 单接口测试
* 根据业务模型的多接口级联测试

### 4.优化后回测

尝试改进瓶颈后，对接口进行回测

# 测试结果问题定位

### 1.资源监控查看

根据测试中异常时间段：回看对应的监控曲线与日志结果

- 操作系统资源消耗：CPU、Memory、Disk I/O、Network I/O。
- 中间件指标：线程池（Thread Pool）、数据库连接池（JDBC）、JVM（GC/FULL GC/堆大小）。
- 数据库指标：效率低下SQL、锁等待/死锁、缓存命中率、会话、进程等。
- 应用：方法耗时、算法、同步和异步、缓存、缓冲。
- 压力机：压力机资源消耗，一般情况下，压力机成为瓶颈的可能性非常低。PTS压力机有保护和调度机制不用单独关注。

### 2.链路调用解析

根据调用链路耗时确定系统瓶颈

